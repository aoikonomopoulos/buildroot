--- a/util.c
+++ b/util.c
@@ -417,7 +417,7 @@
 	free(fiemap);
 
 	/* If failure is due to no filesystem support, return a single extent */
-	if (ret == -EOPNOTSUPP || ret == -ENOTTY)
+	if (ret == -EOPNOTSUPP || ret == -ENOTTY || ret == -EINVAL)
 		return whole_file_exent(size, extents, extent_count);
 
 	image_error(image, "fiemap %s: %d %s\n", filename, errno, strerror(errno));
